-- خدمات
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

-- واجهة المستخدم
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ArceusXAnimations"
ScreenGui.Parent = player.PlayerGui
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 350, 0, 30)
MainFrame.Position = UDim2.new(0, 50, 0.5, -15)
MainFrame.AnchorPoint = Vector2.new(0, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 1, 0)
TitleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(0.7, 0, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Text = "Arceus X Animation Controller"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 14
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

-- زر فتح/إغلاق
local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0, 30, 0, 30)
ToggleButton.Position = UDim2.new(1, -30, 0, 0)
ToggleButton.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Text = "+"
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.TextSize = 16
ToggleButton.Parent = TitleBar

local UICornerToggle = Instance.new("UICorner")
UICornerToggle.CornerRadius = UDim.new(0, 6)
UICornerToggle.Parent = ToggleButton

local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(1, -20, 0, 465)
ContentFrame.Position = UDim2.new(0, 10, 0, 35)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Visible = false
ContentFrame.Parent = MainFrame

-- قائمة الحركات
local AnimationsList = Instance.new("ScrollingFrame")
AnimationsList.Size = UDim2.new(1, 0, 0, 250)
AnimationsList.Position = UDim2.new(0, 0, 0, 0)
AnimationsList.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
AnimationsList.BorderSizePixel = 0
AnimationsList.CanvasSize = UDim2.new(0, 0, 0, 0)
AnimationsList.AutomaticCanvasSize = Enum.AutomaticSize.Y
AnimationsList.ScrollBarThickness = 5
AnimationsList.Parent = ContentFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 5)
UIListLayout.Parent = AnimationsList

local UICornerList = Instance.new("UICorner")
UICornerList.CornerRadius = UDim.new(0, 8)
UICornerList.Parent = AnimationsList

-- إطار الأزرار
local ButtonsFrame = Instance.new("Frame")
ButtonsFrame.Size = UDim2.new(1, 0, 0, 200)
ButtonsFrame.Position = UDim2.new(0, 0, 0, 260)
ButtonsFrame.BackgroundTransparency = 1
ButtonsFrame.Parent = ContentFrame

-- TextBox لإدخال Animation ID
local AnimationIdInput = Instance.new("TextBox")
AnimationIdInput.Size = UDim2.new(1, 0, 0, 30)
AnimationIdInput.Position = UDim2.new(0, 0, 0, 0)
AnimationIdInput.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
AnimationIdInput.TextColor3 = Color3.fromRGB(255, 255, 255)
AnimationIdInput.PlaceholderText = "أدخل Animation ID هنا"
AnimationIdInput.Text = ""
AnimationIdInput.Font = Enum.Font.Gotham
AnimationIdInput.TextSize = 14
AnimationIdInput.Parent = ButtonsFrame

-- TextBox لتحديد اللاعب
local TargetInput = Instance.new("TextBox")
TargetInput.Size = UDim2.new(1, 0, 0, 30)
TargetInput.Position = UDim2.new(0, 0, 0, 35)
TargetInput.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
TargetInput.TextColor3 = Color3.fromRGB(255, 255, 255)
TargetInput.PlaceholderText = "أدخل اسم اللاعب/الضحية هنا"
TargetInput.Text = ""
TargetInput.Font = Enum.Font.Gotham
TargetInput.TextSize = 14
TargetInput.Parent = ButtonsFrame

-- أزرار التحكم
local ControlButtons = Instance.new("Frame")
ControlButtons.Size = UDim2.new(1, 0, 0, 30)
ControlButtons.Position = UDim2.new(0, 0, 0, 70)
ControlButtons.BackgroundTransparency = 1
ControlButtons.Parent = ButtonsFrame

local PlayButton = Instance.new("TextButton")
PlayButton.Size = UDim2.new(0.22, -5, 1, 0)
PlayButton.Position = UDim2.new(0, 0, 0, 0)
PlayButton.BackgroundColor3 = Color3.fromRGB(60, 180, 80)
PlayButton.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayButton.Text = "تشغيل"
PlayButton.Font = Enum.Font.Gotham
PlayButton.TextSize = 14
PlayButton.Parent = ControlButtons

local StopButton = Instance.new("TextButton")
StopButton.Size = UDim2.new(0.22, -5, 1, 0)
StopButton.Position = UDim2.new(0.23, 0, 0, 0)
StopButton.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
StopButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StopButton.Text = "إيقاف"
StopButton.Font = Enum.Font.Gotham
StopButton.TextSize = 14
StopButton.Parent = ControlButtons

local FreezeButton = Instance.new("TextButton")
FreezeButton.Size = UDim2.new(0.22, -5, 1, 0)
FreezeButton.Position = UDim2.new(0.46, 0, 0, 0)
FreezeButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
FreezeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FreezeButton.Text = "تجميد"
FreezeButton.Font = Enum.Font.Gotham
FreezeButton.TextSize = 14
FreezeButton.Parent = ControlButtons

local SaveButton = Instance.new("TextButton")
SaveButton.Size = UDim2.new(0.22, -5, 1, 0)
SaveButton.Position = UDim2.new(0.69, 0, 0, 0)
SaveButton.BackgroundColor3 = Color3.fromRGB(60, 100, 180)
SaveButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SaveButton.Text = "حفظ"
SaveButton.Font = Enum.Font.Gotham
SaveButton.TextSize = 14
SaveButton.Parent = ControlButtons

-- أزرار Bang
local BangButtons = Instance.new("Frame")
BangButtons.Size = UDim2.new(1, 0, 0, 60)
BangButtons.Position = UDim2.new(0, 0, 0, 105)
BangButtons.BackgroundTransparency = 1
BangButtons.Parent = ButtonsFrame

local FrontBangButton = Instance.new("TextButton")
FrontBangButton.Size = UDim2.new(0.48, 0, 1, 0)
FrontBangButton.Position = UDim2.new(0, 0, 0, 0)
FrontBangButton.BackgroundColor3 = Color3.fromRGB(180, 100, 60)
FrontBangButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FrontBangButton.Text = "Front Bang"
FrontBangButton.Font = Enum.Font.Gotham
FrontBangButton.TextSize = 14
FrontBangButton.Parent = BangButtons

local BackBangButton = Instance.new("TextButton")
BackBangButton.Size = UDim2.new(0.48, 0, 1, 0)
BackBangButton.Position = UDim2.new(0.52, 0, 0, 0)
BackBangButton.BackgroundColor3 = Color3.fromRGB(180, 100, 60)
BackBangButton.TextColor3 = Color3.fromRGB(255, 255, 255)
BackBangButton.Text = "Back Bang"
BackBangButton.Font = Enum.Font.Gotham
BackBangButton.TextSize = 14
BackBangButton.Parent = BangButtons

local StopBangButton = Instance.new("TextButton")
StopBangButton.Size = UDim2.new(1, 0, 0, 30)
StopBangButton.Position = UDim2.new(0, 0, 0, 170)
StopBangButton.BackgroundColor3 = Color3.fromRGB(150, 50, 50)
StopBangButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StopBangButton.Text = "إيقاف Bang"
StopBangButton.Font = Enum.Font.Gotham
StopBangButton.TextSize = 14
StopBangButton.Parent = ButtonsFrame

-- UICorner لجميع الأزرار
for _, btn in pairs({PlayButton, StopButton, FreezeButton, SaveButton, AnimationIdInput, TargetInput, FrontBangButton, BackBangButton, StopBangButton}) do
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = btn
end

-- المتغيرات
local currentAnimation = nil
local savedAnimations = {}
local isFrozen = false
local bangRunning = false
local bangDistance = 10
local bangTweenTime = 0.15
local bangDelay = 0.1

-- واجهة قابلة للسحب
do
    local dragging, dragInput, dragStart, startPos
    local function updateInput(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end
    TitleBar.InputBegan:Connect(updateInput)
    TitleBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input == dragInput then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

-- Toggle GUI
ToggleButton.MouseButton1Click:Connect(function()
    ContentFrame.Visible = not ContentFrame.Visible
    if ContentFrame.Visible then
        ToggleButton.Text = "-"
        MainFrame.Size = UDim2.new(0, 350, 0, 500)
    else
        ToggleButton.Text = "+"
        MainFrame.Size = UDim2.new(0, 350, 0, 30)
    end
end)

-- تشغيل وإيقاف وتجميد الأنيميشن
PlayButton.MouseButton1Click:Connect(function()
    local animationId = tonumber(AnimationIdInput.Text)
    if animationId and animationId > 0 then
        if currentAnimation then currentAnimation:Stop() end
        local animation = Instance.new("Animation")
        animation.AnimationId = "rbxassetid://"..animationId
        currentAnimation = humanoid:LoadAnimation(animation)
        currentAnimation:Play()
        isFrozen = false
        FreezeButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
        FreezeButton.Text = "تجميد"
    else
        warn("يرجى إدخال Animation ID صحيح")
    end
end)

StopButton.MouseButton1Click:Connect(function()
    if currentAnimation then currentAnimation:Stop() currentAnimation=nil end
    isFrozen=false
    FreezeButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
    FreezeButton.Text = "تجميد"
end)

FreezeButton.MouseButton1Click:Connect(function()
    if currentAnimation then
        isFrozen = not isFrozen
        if isFrozen then
            currentAnimation:AdjustSpeed(0)
            FreezeButton.BackgroundColor3 = Color3.fromRGB(100,100,180)
            FreezeButton.Text = "إلغاء التجميد"
        else
            currentAnimation:AdjustSpeed(1)
            FreezeButton.BackgroundColor3 = Color3.fromRGB(180,60,60)
            FreezeButton.Text = "تجميد"
        end
    end
end)

-- حفظ الأنيميشن
SaveButton.MouseButton1Click:Connect(function()
    local animationId = tonumber(AnimationIdInput.Text)
    if animationId and animationId>0 then
        local animationName="Animation_"..tostring(#savedAnimations+1)
        savedAnimations[animationName]={id=animationId,frozen=isFrozen}
        local animationButton=Instance.new("TextButton")
        animationButton.Size=UDim2.new(1,0,0,30)
        animationButton.BackgroundColor3=Color3.from
